userdl="/home/pdrome/Downloads"
commonWord="ffmpeg-git"
ffupdatelocal="/usr/local/bin/ffupdate.txt"

siteVersion=$(curl https://johnvansickle.com/ffmpeg/git-readme.txt | grep -i "$commonWord")
siteVersion="$(echo "${siteVersion}" | sed 's/^[[:space:]]*//')"

localVersion=$(grep -i "$commonWord" $ffupdatelocal)
localVersion="$(echo "${localVersion}" | sed 's/^[[:space:]]*//')"

# folder=${siteVersion/build:/""}
folder="$(echo "${siteVersion}" | sed 's/build://' | sed 's/.tar.xz//' | sed 's/^[[:space:]]*//')"

# folder=${folder/\.tar\.xz/""}
# folder="$(echo "${folder}" | sed 's/^[[:space:]]*//')"

if [ "$siteVersion" = "$localVersion" ]
then
    echo "No update available!"
else
    echo "Downloading new version"
    # curl https://johnvansickle.com/ffmpeg/builds/ffmpeg-git-amd64-static.tar.xz -o $userdl/ffmpeg-git-amd64-static.tar.xz
    tar -xf $userdl/ffmpeg-git-amd64-static.tar.xz $folder/ffmpeg $folder/ffprobe

    echo "Copying new files to usr/local/bin"
    sudo cp $userdl/$folder/ffmpeg /usr/local/bin
    sudo cp $userdl/$folder/ffprobe /usr/local/bin

    echo "Removing files"
    rm -vr $userdl/$folder
    # rm $userdl/ffmpeg-git-amd64-static.tar.xz

    echo "Updating ffupdate.txt"
    echo $siteVersion | sudo tee $ffupdatelocal
    echo "Update done!"
fi